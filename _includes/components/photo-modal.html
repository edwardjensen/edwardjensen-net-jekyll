<!-- Photo Modal Component -->
<template x-if="photoModal.isOpen">
  <div class="fixed inset-0 bg-black/90 z-[9999] flex items-center justify-center p-4 top-0 left-0 w-screen h-screen"
       @click.self="close()"
       @keydown.escape="close()">
    <!-- Modal Container -->
    <div class="relative w-full h-full flex flex-col bg-black rounded-lg overflow-hidden max-w-6xl max-h-[95vh]">
      <!-- Close Button -->
      <button @click="close()"
              class="absolute top-4 right-4 z-50 bg-white/20 hover:bg-white/40 text-white rounded-full p-2 transition-colors"
              aria-label="Close modal">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- Image Container -->
      <div class="flex-1 flex items-center justify-center overflow-auto">
        <img :src="photoModal.image"
             :alt="photoModal.alt"
             class="w-full h-full object-contain">
      </div>

      <!-- Caption -->
      <div class="p-4 border-t border-slate-700 bg-black/80">
        <p class="text-sm text-slate-100 whitespace-normal break-words">
          <span x-text="photoModal.caption" class="block"></span>
        </p>
        <p class="text-xs text-slate-400 mt-2">
          <a :href="photoModal.link" 
             target="_blank" 
             rel="noopener noreferrer"
             class="text-amber-400 hover:text-amber-300 underline">
            View on micro.edwardjensen.net
          </a>
        </p>
      </div>

      <!-- Navigation Buttons -->
      <div class="absolute bottom-4 left-4 right-4 flex gap-2 justify-center">
        <button @click="previous()"
                :disabled="!hasPrevious()"
                class="px-3 py-1 text-sm bg-white/20 hover:bg-white/40 disabled:opacity-30 text-white rounded transition-colors"
                aria-label="Previous photo">
          ← Prev
        </button>
        <button @click="next()"
                :disabled="!hasNext()"
                class="px-3 py-1 text-sm bg-white/20 hover:bg-white/40 disabled:opacity-30 text-white rounded transition-colors"
                aria-label="Next photo">
          Next →
        </button>
      </div>
    </div>
  </div>
</template>
